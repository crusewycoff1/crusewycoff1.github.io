<!DOCTYPE html>
<html lang="en">
  <head>
    <title>CRUSE'S CRAZY KART RACING</title>
      <style>
        #yourcar{
          position: absolute;
          width: 100px;
          display: none;
        }
        #enemycar{
          position: absolute;
          left: 250px;
          top: 200px;
          width: 200px;
          height: 300px;
          display: none;
        }
        body{
          background-repeat: no-repeat;
          background-attachment: fixed;
          background-size: cover;
        }
        #finishline{
          position: absolute;
          left: 1100px;
          height: 700px;
        }
        #racingtrack{
          position: absolute;
          z-index: -1;
          height: 500px;
          left: 17%;
          display: none;
        }
        #three{
          height: 300px;
          position: absolute;
          left: 600px;
          top: 100px;
          display: none;
        }
        #two{
          height: 300px;
          position: absolute;
          left: 600px;
          top: 100px;
          display: none;
        }
        #one{
          height: 300px;
          position: absolute;
          left: 600px;
          top: 100px;
          display: none;
        }
        #GO{
          height: 300px;
          position: absolute;
          left: 625px;
          top: 100px;
          display: none;
        }
        #menu{
          height: 500px;
          position: absolute;
          display: inline-block;
          z-index: -1;
          left: 23%;
        }
        #startbutton{
          z-index: 1;
          left: 38%;
          top: 350px;
          position: absolute;
        }
        #characterselect{
          height: 500px;
          width: 900px;
          left: 18%;
          position: absolute;
          display: none;
        }
        .character {
          transition: all 0.2s;
          -webkit-transition: all 0.2s;
          -moz-transition: all 0.2s;
          display: none;
        }
        .character {
          float: left;
          filter: grayscale(100%);
          -webkit-filter: grayscale(100%);
          -moz-filter: grayscale(100%);
        }
        .character:hover {
          filter: grayscale(0%);
          -webkit-filter: grayscale(0%);
          -moz-filter: grayscale(0%);
          transform: scale(1.1);
          -webkit-transform: scale(1.1);
          -moz-transform: scale(1.1);
        }
        #edp445{
          position: absolute;
          top: 25px;
          left: 20%;
        }
        #garycoleman{
          position: absolute;
          left: 30%;
        }
        #darouse{
          position: absolute;
          left: 40%;
        }
        #twelvedogs{
          position: absolute;
          left: 57%;
        }
        #susnuggy{
          position: absolute;
          left: 18%;
          top: 30%;
        }
        #belugacat{
          position: absolute;
          left: 29%;
          top: 30%;
        }
        #leroyjenkins{
          position: absolute;
          left: 42%;
          top: 30%;
        }
        #finishline{
          position: absolute;
          z-index: -1;
          height: 500px;
          left: 85%;
          display: none;
        }
        #level1{
          position: absolute;
          height: 75px;
          left: 325px;
          top: 50px;
          display: none;
        }
        #level2{
          position: absolute;
          height: 75px;
          left: 425px;
          top: 50px;
          display: none;
        }
        #winner{
          width: 300px;
          position: absolute;
          left: 625px;
          top: 100px;
          display: none; 
        }
        #loser{
          width: 300px;
          position: absolute;
          left: 625px;
          top: 100px;
          display: none; 
        }
        #bottomdiv{
          width: 750px;
          height: 585px;
          left: 23%;
          background-color: grey;
          position: absolute;
          z-index: -2;
          display: none;
        }
        #backarrow{
          position: absolute;
          height: 75px;
          top: 526px;
          left: 325px;
          display: none;
        }
        #backarrow2{
          position: absolute;
          height: 75px;
          top: 526px;
          left: 325px;
          display: none;
        }
        #backarrow3{
          position: absolute;
          height: 75px;
          top: 526px;
          left: 325px;
          display: none;
        }
        #money{
          position: absolute;
          top: 540px;
          left: 675px;
          display: none;
        }
      </style>
  </head>
  <body>
    <div><video  onload="playVid()" id="menu" autoplay loop>
      <source src="racinggamestuff/Menu.mp4" type="video/mp4">
      <source src="racinggamestuff/Menu.mp4" type="video/ogg">
    </video>
  <img id="startbutton" onclick="pressedstart()" src="racinggamestuff/Startbutton.gif"></div>
  <!--Character Selection Menu-->
  <img id="characterselect" src="racinggamestuff/car explosion.gif">
  <img onclick="pickededp445()" class="character" src="racinggamestuff/racingimgs/edp445.png" height="150px" id="edp445"><img onclick="pickedgarycoleman()" class="character" src="racinggamestuff/racingimgs/GaryColeman.png" height="150px" id="garycoleman"><img onclick="pickeddarouse()"class="character" src="racinggamestuff/racingimgs/happyrousse.png" height="150px" id="darouse">
  <img onclick="pickeddoggos()" class="character" src="racinggamestuff/racingimgs/12dogs.png" height="150px" id="twelvedogs"><img onclick="pickedsusnuggy()" class="character" src="racinggamestuff/racingimgs/susnuggy.png" height="150px" id="susnuggy"><img onclick="pickedbelugacat()" class="character" src="racinggamestuff/racingimgs/belugacat.png" height="150px" id="belugacat">
  <img onclick="pickedleroyjenkins()" class="character" src="racinggamestuff/racingimgs/leroyjenkins.png" height="150px" id="leroyjenkins">
  
  <!--Level select-->
  <img onclick="level1()" id="level1" class="levelselect" src="/racinggamestuff/numbers/number1.png"> <img onclick="level2()" id="level2" class="levelselect" src="/racinggamestuff/numbers/number2.png">
  <div id="bottomdiv"></div><h1><span id="money">$0</span></h1><img onclick="backarrow()" id="backarrow" src="racinggamestuff/backarrow.png"><img onclick="backarrow2()" id="backarrow2" src="racinggamestuff/backarrow.png"><img onclick="backarrow3()" id="backarrow3" src="racinggamestuff/backarrow.png"><div id="sidebar"></div>
    <img id="racingtrack" src="https://t3.ftcdn.net/jpg/04/45/14/18/360_F_445141888_YJ8ypPK8Rj1PJe9ScCGu7Ua2agZyEuWL.jpg"><img id="finishline" src="racinggamestuff/finishline.jpeg">
      <img id="yourcar" src="racinggamestuff/racingimgs/edp445.png"><img id="enemycar" src="racinggamestuff/dababy.png"><img id="winner" src="racinggamestuff/winner.png"><img  id="loser" src="racinggamestuff/loser.png">
      <img id="three" src="racinggamestuff/number3.png"><img id="two" src="racinggamestuff/number2.png"><img id="one" src="racinggamestuff/number1.png"><img id="GO" src="racinggamestuff/GO.png">
  </body>
</html>
<script>
  var yourcar = document.getElementById("yourcar")
  var enemycar = document.getElementById("enemycar")
  var vid = document.getElementById("menu");

function playVid() {
    vid.play();
}

  var x = 300
  var y = 50
  
  var ex = 250
  var ey = 200

  var eforward = 0 
  var efriction = 0

  var forward = 0
  var friction = 0

  var start = false
  var countdown = 5
  var begin = false

  var forwardaddition = 1.5
  var eforwardaddition = 1

  var money = 0
  var prize = 0

  var character =  document.getElementsByClassName('character')
  var levelselect = document.getElementsByClassName('levelselect')
  //pressedstart//
  function pressedstart() {
    document.getElementById("startbutton").style.setProperty("display", "none");
    document.getElementById("menu").style.setProperty("display", "none");
    document.getElementById("characterselect").style.setProperty("display", "inline-block");
    for(i=0; i < levelselect.length; i=i+1){
      document.getElementsByClassName('levelselect')[i].style.setProperty("display", "inline-block");
    }
    document.getElementById("bottomdiv").style.setProperty("display", "inline-block");
    document.getElementById("backarrow").style.setProperty("display", "inline-block");
    document.getElementById("money").style.setProperty("display", "inline-block");
  }

  //BACK ARROWS//
  function backarrow() {
    document.getElementById("startbutton").style.setProperty("display", "inline-block");
    document.getElementById("menu").style.setProperty("display", "inline-block");
    document.getElementById("characterselect").style.setProperty("display", "none");
    for(i=0; i < levelselect.length; i=i+1){
      document.getElementsByClassName('levelselect')[i].style.setProperty("display", "none");
    }
    document.getElementById("bottomdiv").style.setProperty("display", "none");
    document.getElementById("backarrow").style.setProperty("display", "none");
    document.getElementById("money").style.setProperty("display", "none");
  }

  function backarrow2(){
    for(i=0; i < levelselect.length; i=i+1){
      document.getElementsByClassName('levelselect')[i].style.setProperty("display", "inline-block");
    }
    for(i=0; i < character.length; i=i+1){
      document.getElementsByClassName('character')[i].style.setProperty("display", "none");
    }
    document.getElementById("bottomdiv").style.setProperty("display", "inline-block");
    document.getElementById("backarrow").style.setProperty("display", "inline-block");
    document.getElementById("backarrow2").style.setProperty("display", "none");
  }

  function backarrow3(){
    begin = false
    start = false
    countdown = 5
    x = 300
    y = 50
    ex = 250
    ey = 200
    eforward = 0 
    forward = 0
    wonrace = false
    lostrace = false
    leroyplayed = false
    prizeobtained = false
    for(i=0; i < levelselect.length; i=i+1){
      document.getElementsByClassName('levelselect')[i].style.setProperty("display", "inline-block");
    }
    document.getElementById("backarrow").style.setProperty("display", "none");
    document.getElementById("yourcar").style.setProperty("display", "none");
    document.getElementById("enemycar").style.setProperty("display", "none");
    document.getElementById("racingtrack").style.setProperty("display", "none");
    document.getElementById("finishline").style.setProperty("display", "none");
    document.getElementById("characterselect").style.setProperty("display", "inline-block");
    document.getElementById("three").style.setProperty("display", "none");
    document.getElementById("two").style.setProperty("display", "none");
    document.getElementById("one").style.setProperty("display", "none");
    document.getElementById("loser").style.setProperty("display", "none");
    document.getElementById("winner").style.setProperty("display", "none");
    yourcar.style.left = x + "px"
    yourcar.style.top = y + "px"
    enemycar.style.left = ex + "px"
  }

  //SELECT LEVEL//
  function level1(){
    levelselection()
    enemycar.src = "racinggamestuff/racingimgs/dababy.png"
    eforwardaddition = 1
    prize = 100
  }
  function level2(){
    levelselection()
    enemycar.src = "racinggamestuff/racingimgs/shrimp.png"
    eforwardaddition = 2
  }

  function levelselection() {
    for(i=0; i < character.length; i=i+1){
      document.getElementsByClassName('character')[i].style.setProperty("display", "inline-block");
    }
    for(i=0; i < levelselect.length; i=i+1){
      document.getElementsByClassName('levelselect')[i].style.setProperty("display", "none");
    }
    document.getElementById("backarrow").style.setProperty("display", "none");
    document.getElementById("backarrow2").style.setProperty("display", "inline-block");
  }

  //SELECTED CHARACTER//
  function pickededp445(){
    yourcar.src = "racinggamestuff/racingimgs/edp445.png"
    document.getElementById("yourcar"). width = "100px"
    startrace()
  }
  function pickedgarycoleman(){
    yourcar.src = "racinggamestuff/racingimgs/GaryColeman.png"
    document.getElementById("yourcar").style.width = "150px"
    startrace()
  }
  function pickeddarouse(){
    yourcar.src = "racinggamestuff/racingimgs/happyrousse.png"
    document.getElementById("yourcar").style.width = "250px"
    startrace()
  }
  function pickeddoggos(){
    yourcar.src = "racinggamestuff/racingimgs/12dogs.png"
    document.getElementById("yourcar").style.width = "250px"
    startrace()
  }
  function pickedsusnuggy(){
    yourcar.src = "racinggamestuff/racingimgs/susnuggy.png"
    document.getElementById("yourcar").style.width = "180px"
    startrace()
  }
  function pickedbelugacat(){
    yourcar.src = "racinggamestuff/racingimgs/belugacat.png"
    document.getElementById("yourcar").style.width = "180px"
    startrace()
  }
  var leroyjenkins = false
  function pickedleroyjenkins(){
    yourcar.src = "racinggamestuff/racingimgs/leroyjenkins.png"
    document.getElementById("yourcar").style.width = "180px"
    startrace()
    leroyjenkins = true
  }
  
  //FUNCTION TO BEGIN RACE//
  function startrace(){
    begin = true
    document.getElementById("yourcar").style.setProperty("display", "inline-block");
    document.getElementById("enemycar").style.setProperty("display", "inline-block");
    document.getElementById("racingtrack").style.setProperty("display", "inline-block");
    document.getElementById("finishline").style.setProperty("display", "inline-block");
    document.getElementById("characterselect").style.setProperty("display", "none");
    for(i=0; i < character.length; i=i+1){
      document.getElementsByClassName('character')[i].style.setProperty("display", "none");
    }
    document.getElementById("backarrow").style.setProperty("display", "none");
    document.getElementById("backarrow2").style.setProperty("display", "none");
    document.getElementById("backarrow3").style.setProperty("display", "inline-block");
  }

  //gain speed function//
  document.addEventListener("keyup", function(event) {
    if(event.which === 32){
      if(start === true){
        moving = true
        forward = forward + forwardaddition
      }
    }yourcar.style.left = x + "px"
    if(event.which === 192){
      forward = 500
    }
    })

    //BRAKE FUNCTION//
    document.addEventListener("keydown", function(event) {
      if(event.which === 37){
        if(begin = true){
          if(start === true){
            if(forward > 0){
              friction = friction + 1
            }
            if(friction >= forward){
              friction = 0.3
              forward = 0
            }
          }
        }
      }
    }, false);

    setInterval(function () {
      if(begin === true){
        if(start === true){
          if(x < 1150){
            if(forward > 0){
              x = x + forward
              forward = forward - friction
            }
            if(forward < 0){
              forward = 0
            }
          yourcar.style.left = x + "px"
          yourcar.style.top = y + "px"
          }
        }
      }
    }, 100) // 1000ms = 1 second

    setInterval(function () {
      if(begin === true){
        if(start === true){
          if(ex < 1150){
            if(eforward >= 0){
              eforward = eforward + eforwardaddition
              ex = ex + eforward
              eforward = eforward - efriction
            }
            if(forward < 0){
            eforward = 0
            }
            enemycar.style.left = ex + "px"
          }
        }
      }
    }, 100) // 1000ms = 1 second

    //START FUNCTION//
    setInterval(function () {
      if(begin === true){
        if(start === false){
        countdown = countdown - 1
        }
        if(countdown <= 0){
          start = true
          countdown = 0
        }
      }
    }, 1000) // 1000ms = 1 second

    var wonrace = false
    var lostrace = false
    var leroyplayed = false
    var prizeobtained = false
      //START FUNCTION//
      setInterval(function () {
        if(countdown === 4){
          document.getElementById("three").style.setProperty("display", "inline-block");
        }
        if(countdown === 3){
          document.getElementById("three").style.setProperty("display", "none");
          document.getElementById("two").style.setProperty("display", "inline-block");
        }
        if(countdown === 2){
          document.getElementById("two").style.setProperty("display", "none");
          document.getElementById("one").style.setProperty("display", "inline-block");
        }
        if(countdown === 1){
          document.getElementById("one").style.setProperty("display", "none");
          document.getElementById("GO").style.setProperty("display", "inline-block");
        }
        if(countdown === 0){
          document.getElementById("GO").style.setProperty("display", "none");
          if(leroyjenkins === true){
            if(leroyplayed === false){
              var audio = new Audio("racinggamestuff/leeroyjenkins.mp3");
                audio.play();
                leroyplayed = true
            }
          }
        }
        if(x >= 1150){
          if(lostrace === false){
            document.getElementById("winner").style.setProperty("display", "inline-block");
            wonrace = true
            if(prizeobtained === false){
              money = money + prize
              document.getElementById("money").innerHTML = "$" + money;
              prizeobtained = true
            }
          }
        }
        if(ex >= 1150){
          if(wonrace === false){
            document.getElementById("loser").style.setProperty("display", "inline-block");
            lostrace = true
          }
        }
        yourcar.style.left = x + "px"
        yourcar.style.top = y + "px"
    }, 1) // 1000ms = 1 second
    document.getElementById("money").innerHTML = "$" + money;

    //SAVE GAME FUNCTION?//
    function saveGame() {
      var gameSave = {
        money: money
      };
      localStorage.setItem("gameSave", JSON.stringify(gameSave));
    }
    function loadgame() { 
      var savedGame = JSON.parse(localStorage.getItem("gameSave"));
      if (typeof savedGame.money !== "undefined") money = savedGame.money;
    }

    window.onload = function() {
      loadgame();
      document.getElementById("money").innerHTML = "$" + money;
    }

    setInterval(function () {
      saveGame()
      document.getElementById("test").innerHTML = eforwardaddition;
    }, 1000) // 1000ms = 1 second
</script>

