<!DOCTYPE html>
<html lang="en">
  <head>
    <style>
      #background{
        height: 500px;
        width: 700px;
        left: 315px;
        position: absolute;
        border-style: solid;
        border-radius: 10%;
        border-width: 10px;
      }
      #pondbackground{
        height: 500px;
        width: 700px;
        left: 315px;
        position: absolute;
        border-style: solid;
        border-radius: 10%;
        border-width: 10px;
        display: none;
      }
      #fridgebackground{
        height: 500px;
        width: 700px;
        left: 315px;
        position: absolute;
        border-style: solid;
        border-radius: 10%;
        border-width: 10px;
        display: none;
      }
      #fridgeinterior{
        position: absolute;
        width: 400px;
        left: 475px;
        top: 30px;
        z-index: 2;
        display: none;
      }
      #xbox{
        position: absolute;
        width: 50px;
        height: 50px;
        left: 825px;
        top: 30px;
        z-index: 3;
        display: none;
      }
      .cat{
        position: absolute;
        z-index: 1;
      }
      #catdead{
        height: 390px;
        left: 519px;
        top: 133px;
        display: none;
      }
      #catangry{
        height: 397px;
        left: 512px;
        width: 292px;
        top: 130px;
        display: none;
      }
      #catmoody{
        height: 390px;
        left: 519px;
        top: 130px;
        display: none;
      }
      #catneutral{
        left: 512px;
        top: 134px;
        height: 390px;
        width: 300px;
        display: none;
      }
      #cathappy{
        height: 400px;
        left: 515px;
        top: 125px;
        display: none;
      }
      #catecstatic{
        height: 400px;
        left: 506px;
        top: 128px;
        display: none;
      }
      #rightarrow{
        position: absolute;
        z-index: 1;
        height: 100px;
        left: 950px;
        top: 225px;
      }
      #leftarrow{
        position: absolute;
        z-index: 1;
        height: 100px;
        left: 325px;
        top: 225px;
        transform: scaleX(-100%);
      }
      #clickablefridge{
        position: absolute;
        height: 385px;
        width: 215px;
        left: 575px;
        top: 90px;
        z-index: 1;
        display: none;
      }
      .fishinggamestuff{
        display: none;
      }
      #fishingbackground{
        height: 500px;
        width: 700px;
        left: 320px;
        top: 10px;
        background-color: rgb(134, 134, 221);
        background-image: url("catemotions/seaweed.gif"), url("catemotions/water.gif");
        background-position: bottom;
        background-size: 50px 100px, cover;
        background-repeat: repeat-x, no-repeat;
        position: absolute;
        border-style: solid;
        border-radius: 10%;
        border-width: 10px;
        display: none;
      }
      #outsideborder{
        height: 500px;
        width: 700px;
        left: 320px;
        top: 10px;
        position: absolute;
        border-style: solid;
        border-radius: 10%;
        border-width: 10px;
        z-index: 3;
        display: none;
      }
      #outsideborder2{
        height: 505px;
        width: 705px;
        left: 310px;
        top: 0px;
        position: absolute;
        border-style: solid;
        border-radius: 10%;
        border-width: 20px;
        border-color: white;
        z-index: 2;
        display: none;
      }
      #fishingline{
        background-color: green;
        position: absolute;
        z-index: 1;
        width: 70px;
        height: 70px;
        opacity: .5 ;
        left: 590px;
        top: 180px;
        display: none;
      }
      #fish{
        position: absolute;
        z-index: 1;
        height: 40px;
        display: none;
      }
      #progressbar{
        position: absolute;
        left: 250px;
        border-style: solid;
        height: 500px;
        width: 50px;
        top: 20px;
        display: none;
      }
      #yourprogress{
        width: 50px;
        height: 0%;
        background-color: lawngreen;
        display: none;
      }
      #progresscounter{
        position: absolute;
        top: 525px;
        left: 250px;
      }
      #caught{
        position: absolute;
        z-index: 12;
        color: yellow;
        font-family: "Comic Sans MS";
        left: 500px;
        top: 200px;
        display: none;
      }
      #startfishing{
        position: absolute;
        top: 400px;
        left: 575px;
        color: white;
        display: none;
      }
      #startfishing:hover{
        color: blanchedalmond;
      }
      .deadfish{
        position: absolute;
        z-index: 1000;
        width: 175px;
      }
      #deadfish1{
        left: 587px;
        top: 100px;
        display: none;
      }
      #deadfish2{
        left: 587px;
        top: 200px;
        display: none;
      }
      #deadfish3{
        left: 587px;
        top: 300px;
        display: none;
      }
      #deadfish4{
        left: 500px;
        top: 425px;
        display: none;
      }
      #deadfish5{
        left: 687px;
        top: 425px;
        display: none;
      }
      #cathappinessbar{
        position: absolute;
        top: 515px;
        left: 575px;
      }
      #helpbox{
        background-color: grey;
        font-size: 19px;
        width: 250px;
        display: none;
      }
      #youlosediv{
        position: absolute;
        z-index: 10000;
        border-style: solid;
        background-color: rgb(100, 100, 197);
        left: 550px;
        top: 200px;
        display:none;
      }
    </style>
  </head>
  <body>
    <div>
      <img id="background" src="https://a0.muscache.com/pictures/e65c55d1-316c-4bef-9368-97e2f586e9b3.jpg">
      <img onclick="raisehappiness()" id="catdead" class="cat" src="catemotions/catdead.png">
      <img onclick="raisehappiness()" id="catangry" class="cat" src="catemotions/catangry.png">
      <img onclick="raisehappiness()" id="catmoody" class="cat" src="catemotions/catmoody.png">
      <img onclick="raisehappiness()" id="catneutral" class="cat" src="catemotions/catneutral.png">
      <img onclick="raisehappiness()" id="cathappy" class="cat" src="catemotions/cathappy.png">
      <img onclick="raisehappiness()" id="catecstatic" class="cat" src="catemotions/catecstatic.png">
      <img onclick="right()" id="rightarrow" src="http://cdn.onlinewebfonts.com/svg/img_211250.png">
      <img onclick="left()" id="leftarrow" src="http://cdn.onlinewebfonts.com/svg/img_211250.png">
    </div>
    <div>
      <img id="pondbackground" src="catemotions/pond.JPG">
      <div id="startfishing" onclick="startfishing()"><h1>Start Fishin</h1></div>
    </div>
    <div>
      <img id="fridgebackground" src="https://i.insider.com/612fc7289ef1e50018f93bec?width=700">
      <div id="clickablefridge" onclick="openfridge()"></div>
      <img id="fridgeinterior" src="https://images.fineartamerica.com/images/artworkimages/mediumlarge/1/5-fridge-interior-allan-swart.jpg">
      <img id="xbox" onclick="closefridge()" src="https://www.pngkey.com/png/full/67-676797_mb-image-png-red-x-in-a-box.png">
      <img id="deadfish1" class="deadfish" src="catemotions/deadfish.png" onclick="usefish()">
      <img id="deadfish2" class="deadfish" src="catemotions/deadfish.png" onclick="usefish()">
      <img id="deadfish3" class="deadfish" src="catemotions/deadfish.png" onclick="usefish()">
      <img id="deadfish4" class="deadfish" src="catemotions/deadfish.png" onclick="usefish()">
      <img id="deadfish5" class="deadfish" src="catemotions/deadfish.png" onclick="usefish()">
    </div>
    <div id="cathappinessbar"><h3>Happiness Level: <span id="cathappiness"></span></h3></div>
    <div id="caught"><h1>YOU CAUGHT DA FISH!!!</h1><br>
      <center><button onclick="endfishing()">continue</button></center>
    </div>
    <img id="fish" src="https://www.seekpng.com/png/full/123-1238243_fish-clipart-blue-blue-fish-clipart.png">
    <div id="outsideborder"></div><div id="outsideborder2"></div><div id="fishingbackground"></div>
    <div id="fishingline"></div>
    <button onclick="saveGame()">SAVE</button><br><br>
    <button onclick="help()">HELP</button><br>
    <div id="helpbox">
      Tip #1: If you click the cat ten times, its happiness will go up 1<br><br>
      Tip #2: if you feed a cat a fish from the fridge(Open the fridge by clicking on it and give fish by clicking on the fish) it's happiness will go up by 10<br><br>
      Tip #3: If the cat's happiness gets too low, it will D I E
    </div>
    <div id="progresscounter"><span id="progress"></span></div>
    <div id="progressbar"><div id="yourprogress"></div></div>
    <div id="youlosediv"><center><h1>YOUR CAT DIED:(</h1><br><button onclick="startover()">Try Again?</button></center></div>
  </body>
</html>
<script>
  var cathappiness = 10
  var catdead = false

  setInterval(appeasethecat, 1)
  function appeasethecat(){
    if(catdead === false){
      if(inpond === false){
        if(cathappiness < -20){
          document.getElementById("catdead").style.setProperty("display", "inline-block");
          document.getElementById("catangry").style.setProperty("display", "none");
          document.getElementById("catneutral").style.setProperty("display", "none");
          document.getElementById("catecstatic").style.setProperty("display", "none");
          document.getElementById("catmoody").style.setProperty("display", "none");
          catdead = true
        }
        else if(cathappiness <= -10){
          document.getElementById("catangry").style.setProperty("display", "inline-block");
          document.getElementById("catmoody").style.setProperty("display", "none");
        }
        else if(cathappiness <= 0){
          document.getElementById("catmoody").style.setProperty("display", "inline-block");
          document.getElementById("catangry").style.setProperty("display", "none");
          document.getElementById("catneutral").style.setProperty("display", "none");
        }
        else if(cathappiness <= 10){
          document.getElementById("catneutral").style.setProperty("display", "inline-block");
          document.getElementById("catmoody").style.setProperty("display", "none");
          document.getElementById("cathappy").style.setProperty("display", "none");
        }
        else if(cathappiness <= 20){
          document.getElementById("cathappy").style.setProperty("display", "inline-block");
          document.getElementById("catneutral").style.setProperty("display", "none");
          document.getElementById("catecstatic").style.setProperty("display", "none");
        }
        else if(cathappiness > 20){
          document.getElementById("catecstatic").style.setProperty("display", "inline-block");
          document.getElementById("cathappy").style.setProperty("display", "none");
        }
      }
    }
  }
  setInterval(catisdead, 1)
  function catisdead(){
    if(cathappiness < -20){
      document.getElementById("youlosediv").style.setProperty("display", "inline-block");
    }
  }

  function startover(){
    cathappiness = 10
    fishamount = 0
    saveGame();
    location.reload()
  }

  //Interval Functions//
  setInterval(function () {
    cathappiness = cathappiness - 1
    document.getElementById("cathappiness").innerHTML = cathappiness
    saveGame()
  }, 10000) // 1000ms = 1 second


  var catfracten = 0
  function raisehappiness() {
    if(catdead === false){
      catfracten = catfracten + 1
      if(catfracten === 10){
        cathappiness = cathappiness + 1
        catfracten = 0
      }
    document.getElementById("cathappiness").innerHTML = cathappiness
    }
  }
  var helpboxvar = 0
  function help(){
    helpboxvar = helpboxvar + 1
    if(helpboxvar % 2 === 0){
      document.getElementById("helpbox").style.setProperty("display", "inline-block");
    }
    else {
      document.getElementById("helpbox").style.setProperty("display", "none");
    }
  }

  var cat = document.getElementsByClassName('cat')
  var inpond = false
  var scrollamt = 0

  function right(){
    scrollamt = scrollamt + 1
    scroll()
  }
  function left(){
    scrollamt = scrollamt - 1
    scroll()
  }
  function scroll(){
    if(scrollamt === -1){
      document.getElementById("fridgebackground").style.setProperty("display", "inline-block");
      document.getElementById("background").style.setProperty("display", "none");
      for(i=0; i<cat.length; i=i+1){
        document.getElementsByClassName('cat')[i].style.setProperty("display", "none");
      }
      inpond = true
      document.getElementById("leftarrow").style.setProperty("display", "none");
      document.getElementById("clickablefridge").style.setProperty("display", "inline-block");
    }
    if(scrollamt === 0){
      document.getElementById("pondbackground").style.setProperty("display", "none");
      document.getElementById("fridgebackground").style.setProperty("display", "none");
      document.getElementById("background").style.setProperty("display", "inline-block");
      inpond = false
      document.getElementById("rightarrow").style.setProperty("display", "inline-block");
      document.getElementById("leftarrow").style.setProperty("display", "inline-block");
      document.getElementById("clickablefridge").style.setProperty("display", "none");
      if(catdead === true){
        document.getElementById("catdead").style.setProperty("display", "inline-block");
      }
      document.getElementById("startfishing").style.setProperty("display", "none");
    }
    if(scrollamt === 1){
      document.getElementById("pondbackground").style.setProperty("display", "inline-block");
      document.getElementById("background").style.setProperty("display", "none");
      inpond = true
      for(i=0; i<cat.length; i=i+1){
        document.getElementsByClassName('cat')[i].style.setProperty("display", "none");
      }
      document.getElementById("rightarrow").style.setProperty("display", "none");
      document.getElementById("startfishing").style.setProperty("display", "inline-block");
    }
  }

  var fishingstart = false
  function startfishing(){
    fishingstart = true
    document.getElementById("fishingbackground").style.setProperty("display", "inline-block");
    document.getElementById("outsideborder").style.setProperty("display", "inline-block");
    document.getElementById("outsideborder2").style.setProperty("display", "inline-block");
    document.getElementById("fishingline").style.setProperty("display", "inline-block");
    document.getElementById("fish").style.setProperty("display", "inline-block");
    document.getElementById("progressbar").style.setProperty("display", "inline-block");
    document.getElementById("yourprogress").style.setProperty("display", "inline-block");
    document.getElementById("pondbackground").style.setProperty("display", "none");
    document.getElementById("startfishing").style.setProperty("display", "none");
    document.getElementById("leftarrow").style.setProperty("display", "none");
    xfish = Math.round(Math.random() *(860 - 330) + 330)
    yfish = Math.round(Math.random() *(350 - 20) + 20)
    progress = 0
    yourprogress.style.height = progress + "%"
    fishcatch = false
    movefishthingy = false
    saveGame()
  }
  var fishamount = 0
  function endfishing(){
    fishingstart = false
    document.getElementById("fishingbackground").style.setProperty("display", "none");
    document.getElementById("outsideborder").style.setProperty("display", "none");
    document.getElementById("outsideborder2").style.setProperty("display", "none");
    document.getElementById("fishingline").style.setProperty("display", "none");
    document.getElementById("fish").style.setProperty("display", "none");
    document.getElementById("progressbar").style.setProperty("display", "none");
    document.getElementById("yourprogress").style.setProperty("display", "none");
    document.getElementById("progress").style.setProperty("display", "none");
    document.getElementById("pondbackground").style.setProperty("display", "inline-block");
    document.getElementById("startfishing").style.setProperty("display", "inline-block");
    document.getElementById("leftarrow").style.setProperty("display", "inline-block");
    document.getElementById("caught").style.setProperty("display", "none");
    fishamount = fishamount + 1
    saveGame()
  }

  function openfridge(){
    document.getElementById("fridgeinterior").style.setProperty("display", "inline-block");
    document.getElementById("xbox").style.setProperty("display", "inline-block");
    if(fishamount === 1){
      document.getElementById("deadfish1").style.setProperty("display", "inline-block");
    }
    if(fishamount === 2){
      document.getElementById("deadfish1").style.setProperty("display", "inline-block");
      document.getElementById("deadfish2").style.setProperty("display", "inline-block");
    }
    if(fishamount === 3){
      document.getElementById("deadfish1").style.setProperty("display", "inline-block");
      document.getElementById("deadfish2").style.setProperty("display", "inline-block");
      document.getElementById("deadfish3").style.setProperty("display", "inline-block");
    }
    if(fishamount === 4){
      document.getElementById("deadfish1").style.setProperty("display", "inline-block");
      document.getElementById("deadfish2").style.setProperty("display", "inline-block");
      document.getElementById("deadfish3").style.setProperty("display", "inline-block");
      document.getElementById("deadfish4").style.setProperty("display", "inline-block");
    }
    if(fishamount >= 5){
      document.getElementById("deadfish1").style.setProperty("display", "inline-block");
      document.getElementById("deadfish2").style.setProperty("display", "inline-block");
      document.getElementById("deadfish3").style.setProperty("display", "inline-block");
      document.getElementById("deadfish4").style.setProperty("display", "inline-block");
      document.getElementById("deadfish5").style.setProperty("display", "inline-block");
    }
  }
  function closefridge(){
    document.getElementById("fridgeinterior").style.setProperty("display", "none");
    document.getElementById("xbox").style.setProperty("display", "none");
    document.getElementById("deadfish1").style.setProperty("display", "none");
    document.getElementById("deadfish2").style.setProperty("display", "none");
    document.getElementById("deadfish3").style.setProperty("display", "none");
    document.getElementById("deadfish4").style.setProperty("display", "none");
    document.getElementById("deadfish5").style.setProperty("display", "none");
  }
  function usefish(){
    cathappiness = cathappiness + 10
    fishamount = fishamount - 1
    document.getElementById("cathappiness").innerHTML = cathappiness
    closefridge()
  }

  var x = 590
  var y = 180
  var line = document.getElementById("fishingline")
  var fish = document.getElementById("fish")
  var xfish = Math.round(Math.random() *(860 - 330) + 330)
  var yfish = Math.round(Math.random() *(350 - 20) + 20)

  var moveright = false
  var moveleft = false
  var moveup = false
  var movedown = false

  var movefishthingy = false
  var pressedspace = false

    document.addEventListener("keydown", function(event) {
      if(fishingstart === true){
      if(event.which === 39){
        moveright = true
      }
      if(event.which === 37){
        moveleft = true
      }
      if(event.which === 38){
        moveup = true
      } 
      if(event.which === 40){
        movedown = true
      }
      if(event.which === 32){
        if(pressedspace === false){
          movefishthingy = true
        }
        if(pressedspace === true){
          movefishthingy = false
        }
      }
    }
    }, false);

    document.addEventListener("keyup", function(event) {
      if(event.which === 39){
        moveright = false
      }
      if(event.which === 37){
        moveleft = false
      }
      if(event.which === 38){
        moveup = false
      }
      if(event.which === 40){
        movedown = false
      }
    })

  setInterval(function() {
    if(moveright === true){
      if(x <= 960){
        x = x + 2
      }
    }
    if(moveleft === true){
      if(x >= 330){
        x = x - 2
      }
    }
    if(moveup === true){
      if(y >= 20){
        y = y - 2
      }
    }
    if(movedown === true){
      if(y <= 450){
        y = y + 2
      }
    }
    line.style.left = x + "px"
    line.style.top = y + "px"
    fish.style.left = xfish + "px"
    fish.style.top = yfish + "px"
  }, 1);

  var fishmovementx = 2
  var fishmovementy = 2
  setInterval(function() {
    if(fishingstart === true){
    if(movefishthingy === false){
    if(xfish <= 960 && xfish >= 330){
        xfish = xfish + fishmovementx
    }
    if(yfish <= 480 && yfish >= 20){
      yfish = yfish + fishmovementy
    }
    if(yfish < 20){
      yfish = yfish + 10
      fishmovementx = 0
      fishmovementy = 0
      fishrandommulty = 2
      fishrandomfunction()
    }
    if(yfish > 480){
      yfish = yfish - 10
      fishmovementx = 0
      fishmovementy = 0
      fishrandommulty = 0
      fishrandomfunction()
    }
    if(xfish < 330){
      xfish = xfish + 10
      fishmovementx = 0
      fishrandommultx = 2
      fishmovementy = 0
      fishrandomfunction()
    }
    if(xfish > 960){
      xfish = xfish - 10
      fishmovementx = 0
      fishrandommultx = 0
      fishmovementy = 0
      fishrandomfunction()
    }
  }
  }
  catchthatfish()
  }, 1);

  var fishrandommultx = 2
  var fishrandommulty = 2
  setInterval(fishrandomfunction, 1000)
  function fishrandomfunction() {
    fishmovementx = Math.round(Math.random()*fishrandommultx - 1)
    fishmovementy = Math.round(Math.random()*fishrandommulty - 1)
    if(fishmovementx === 0){
      while(fishmovementx === 0){
        fishmovementx = Math.round(Math.random()*fishrandommultx - 1)
      }
    }
    if(fishmovementy === 0){
      while(fishmovementy === 0){
        fishmovementy = Math.round(Math.random()*fishrandommulty - 1)
      }
    }
  }

  //MAKE IT SO the function looks like this math.random()*1 -1 or something so the only variables are -1 0 1 and then have the fish have a set speed so then it will only move and not get stuck
  var progress = 0
  var yourprogress = document.getElementById("yourprogress");
  var fishcatch = false
  function catchthatfish() {
    if(fishingstart === true){
    if(fishcatch === false){
    if(x > xfish - 65 && x < xfish + 50 && y > yfish - 50 && y < yfish + 50){
      if(progress <= 100){
        progress = progress + .25
        if(progress >= 99){
          document.getElementById("caught").style.setProperty("display", "inline-block");
          progress = 100
          fishcatch = true
          movefishthingy = true
        }
      }
    }
    else{
      if(progress >= 0)
      progress = progress - .05
    }
    yourprogress.style.height = progress + "%"
    document.getElementById("progress").innerHTML = Math.round(progress)
  }
  }
  }

   //Save and Load Game Functions
   function saveGame() {
    var gameSave = {
      cathappiness: cathappiness,
      fishamount: fishamount
    };
    localStorage.setItem("gameSave", JSON.stringify(gameSave));
  }

  function loadgame() {
    var savedGame = JSON.parse(localStorage.getItem("gameSave"));
    if (typeof savedGame.cathappiness !== "undefined") cathappiness = savedGame.cathappiness;
    if (typeof savedGame.fishamount !== "undefined") fishamount = savedGame.fishamount;
  }

  window.onload = function () {
    loadgame();
    document.getElementById("cathappiness").innerHTML = cathappiness
  }
</script>